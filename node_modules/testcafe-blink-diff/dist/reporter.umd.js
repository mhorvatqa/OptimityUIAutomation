!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";const e="http://www.w3.org/1999/xlink",t=/^(\w*|[.#]\w+)(#[\w-]+)?([\w.-]+)?$/,n=["oncreate","onupdate","ondestroy"],o=["constructor","instance","children","render","state","props"],r=[];class i{constructor(e,t){this.childNodes=e&&e.map(t)||[],this.nodeType=11}appendChild(e){this.childNodes.push(e)}remove(){return Promise.all(this.childNodes.map(e=>"function"==typeof e.remove&&e.remove()))}mount(e){this.childNodes.forEach(t=>{t instanceof i?t.mount(e):e.appendChild(t)})}get outerHTML(){return this.childNodes.map(e=>e.outerHTML||e.nodeValue).join("")}}const s=e=>Array.isArray(e),c=e=>"function"==typeof e,u=e=>null==e,a=e=>null!==e&&"[object Object]"===Object.prototype.toString.call(e),d=e=>null!==e&&("function"==typeof e||"object"==typeof e),f=e=>"string"==typeof e||"number"==typeof e||"boolean"==typeof e,l=(e,t)=>{if(c(e)||c(t)||typeof e!=typeof t)return!0;if(s(e)){if(e.length!==t.length)return!0;for(let n=0;n<t.length;n+=1)if(l(e[n],t[n]))return!0}else{if(!a(e))return e!==t;{const n=Object.keys(e).sort(),o=Object.keys(t).sort();if(l(n,o))return!0;for(let r=0;r<n.length;r+=1)if(l(e[n[r]],t[o[r]]))return!0}}},h=e=>!c(e)&&(s(e)?0===e.length:a(e)?0===Object.keys(e).length:void 0===e||""===e||null===e||!1===e),p=e=>{return s(e)&&e.length<=3&&("string"==typeof e[0]&&(n=e[0])&&t.test(n)||c(e[0]));var n},m=e=>(h(e)||s(e)?e:[e])||[],w=(e,t)=>e.filter(t||(e=>!h(e))),y=e=>e&&"object"==typeof e?s(e)?e.map(e=>y(e)):e instanceof Date?new Date(e.getTime()):e instanceof RegExp?new RegExp(e.source,e.flags):Object.keys(e).reduce((t,n)=>Object.assign(t,{[n]:y(e[n])}),{}):e;function v(e,t,n){const o=Math.max(e.length,t.length);for(let r=0;r<o;r+=1)l(e[r],t[r])&&n(e[r]||null,u(t[r])?null:t[r],r)}const g=(e,t,n={})=>(...o)=>t===o.length&&e(...o,n),b=(e,t)=>t instanceof i?t.mount(e):e.appendChild(t),k=(e,t)=>{t&&e.parentNode.insertBefore(t,e),((e,t)=>{e&&e.removeChild(t)})(e.parentNode,e)};function O(e){return s(e)?p(e)||e.some(p)?c(e[0])?O(e[0](e[1],m(e[2]))):e.map(O):e.reduce((e,t)=>e.concat(O(t)),[]):e}function E(e){if(f(e)||!p(e))return e;if((s(e[1])||f(e[1]))&&(e[2]=e[1],e[1]=null),e[2]=m(e[2]),!p(e)||c(e[0]))return e;const n=e[0].match(t),o=n[1]||"div",r={...e[1]};if(n[2]&&(r.id=n[2].substr(1)),n[3]){const e=n[3].substr(1).split(".");s(r.class)||f(r.class)?(r.class=s(r.class)?r.class:r.class.split(/\W/),r.class=e.concat(r.class).reduce((e,t)=>(-1===e.indexOf(t)&&e.push(t),e),[])):d(r.class)?e.forEach(e=>{r.class[e]=1}):r.class=e}return[o,r,e[2]]}function j(t,n,o,r){Object.keys(n).forEach(i=>{if("key"===i)return;if("ref"===i)return void(t.oncreate=e=>{n[i].current=e});d(n[i])&&(n[i]=c(r)&&r(t,i,n[i])||null);const s=h(n[i]),u=!0===n[i]?i:n[i],a=i.replace(/^xlink:?/,"");o&&i!==a?s?t.removeAttributeNS(e,a):t.setAttributeNS(e,a,u):s?t.removeAttribute(i):t.setAttribute(i,u)})}function x(e,t=(e=>e())){return Promise.resolve().then(()=>t(()=>e.remove()))}function N(e,t,n){if(f(e))return document.createTextNode(e);if(u(e))throw new Error(`Invalid vnode, given '${e}'`);if(!p(e))return s(e)?new i(O(e),e=>N(e,t,n)):e;let o=E(e);if(c(o[0])){const e=o[0](o[1],o[2]);for(;c(e[0]);)e[0]=e[0](o[1],o[2]);if(!p(e))return N(e[0]);o=E(e)}const[r,a,d]=o,l=t||"svg"===r;let m=l?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r);return c(n)&&(m=n(m,r,a,d)||m),c(m)?N(m(),l,n):(h(a)||j(m,a,l,n),c(m.oncreate)&&m.oncreate(m),c(m.enter)&&m.enter(),m.remove=()=>Promise.resolve().then(()=>c(m.ondestroy)&&m.ondestroy(m)).then(()=>c(m.teardown)&&m.teardown()).then(()=>c(m.exit)&&m.exit()).then(()=>k(m)),d.forEach(e=>{h(e)||b(m,N(e,l,n))}),m)}function L(e,t,n=N){"function"==typeof t&&(n=t,t=e,e=void 0),t||(t=e,e=void 0),e||(e=document.body),"string"==typeof e&&(e=document.querySelector(e));const o=s(t)||f(t)?n(t):t;return u(o)||b(e,o),o}function C(e,t,n,o,r,i=null){if(null===i)if(s(t)&&s(n)){const i=E(t),s=E(n);1===e.nodeType?p(i)&&p(s)?e.tagName===s[0].toUpperCase()?(function(e,t,n,o,r){let i;const s=Object.keys(t).concat(Object.keys(n)).reduce((e,o)=>(o in t&&!(o in n)?(e[o]=null,i=!0):l(t[o],n[o])&&(e[o]=n[o],i=!0),e),{});return i&&j(e,s,o,r),i}(e,i[1],s[1],o,r)&&(c(e.onupdate)&&e.onupdate(e),c(e.update)&&e.update()),v(i[2],s[2],(t,n,i)=>C(e,t,n,o,r,i))):k(e,N(s,o,r)):p(i)?k(e,N(s,o,r)):v(i,s,(t,n,i)=>C(e,t,n,o,r,i)):v(i,s,(t,n,i)=>C(e,t,n,o,r,i))}else 3!==e.nodeType?k(e,N(n,o,r)):e.nodeValue=n;else e.childNodes[i]?u(n)?x(e.childNodes[i]):t&&t[0]===n[0]?C(e.childNodes[i],t,n,o,r,null):((e,t,n)=>{e.replaceChild(t,e.childNodes[n])})(e,N(n,o,r),i):b(e,N(n,o,r))}function T(e,t){return(n,o)=>{let i;const s={};function u(e){return s.get.reduce((t,n)=>t.then(()=>n.off&&n.off()).then(()=>!e&&n.on&&n.cb()).then(e=>{c(e)&&(n.off=e)}),Promise.resolve())}function a(e){return e.catch(e=>{if(s.get&&(e=>{("undefined"!=typeof window&&window.requestAnimationFrame||setTimeout)(e)})(()=>u(!0)),!s.onError)throw e;s.onError(e)}).then(()=>{i=null})}function d(){if(s.get)return i?i.then(d):void(i=a(u()))}return s.sync=()=>Promise.resolve().then(()=>{if(i)return i.then(s.sync);i=a(s.set())}),t(()=>{s.key=0,s.fx=0,s.m=0,function(e){r.push(e)}(s);try{const t=e(n,o),i=[s.key,s.fx,s.m].join(".");if(s.hash){if(s.hash!==i)throw new Error("Hooks must be called in a predictable way")}else s.hash=i;return t}catch(t){throw new Error(`${e.name||"View"}: ${t.message}`)}finally{!function(e){r[r.indexOf(e)]=null}(s),d()}},e=>{s.set=e})}}function A(e,t,n,r){if(a(e)&&c(e.render)){const i=e;e=(e,t)=>i.render(e,t,r),t=c(i.state)?i.state(t):i.state||t,n=Object.keys(i).reduce((e,t)=>(!o.includes(t)&&c(i[t])&&(e[t]=(...e)=>i[t](...e)),e),{})}let i;return c(e)&&e.prototype&&c(e.prototype.render)&&e.constructor===Function&&e.prototype.constructor!==Function&&(i=new e(t,r),i.props=y(t||{}),e=e=>(i.state=e,i.render()),t=c(i.state)?i.state(t):i.state||t,n=(e=>{const t=[];do{t.push(e)}while(e=Object.getPrototypeOf(e));return t.pop(),t.reduce((e,t)=>(Object.getOwnPropertyNames(t).forEach(n=>{o.includes(n)||"function"!=typeof t[n]||e.includes(n)||e.push(n)}),e),[])})(i).reduce((e,t)=>{if("_"!==t.charAt()){const n=i[t].bind(i);e[t]=(...e)=>()=>n(...e),i[t]=(...n)=>e[t](...n)}return e},{})),{Tag:e,state:t,actions:n,instance:i}}function P(e,t,n,o){const r=s(n)?n:void 0;n=a(n)?n:{},c(t)&&(o=t,t=null);const{Tag:i,state:u,actions:f,instance:l}=A(e,t,n,r);return!l&&c(e)&&1===arguments.length?T(e,P):(e,t=N,n=o)=>{const r=y(u||{}),s=[];let h,p,m;function w(e){return Promise.all(s.map(e=>e(r,m))).then(()=>{C(h,p,p=O(i(r,m)),null,t,null)}).then(()=>e)}return n&&n(e=>w(Object.assign(r,e))),m=Object.keys(f).reduce((e,t)=>{const n=f[t];if(!c(n))throw new Error(`Invalid action, given ${n} (${t})`);return e[t]=(...e)=>{const t=n(...e)(r,m);return d(t)&&c(t.then)?t.then(e=>a(e)?w(Object.assign(r,e)):e):(a(t)&&w(Object.assign(r,t)),t)},l&&(l[t]=e[t],e.instance=l),e},{}),m.subscribe=e=>(Promise.resolve(e(r,m)).then(()=>s.push(e)),()=>{s.splice(s.indexOf(e),1)}),m.unmount=e=>x(h,e),Object.defineProperty(m,"state",{configurable:!1,enumerable:!0,get:()=>r}),h=L(e,p=O(i(r,m)),t),m.target=h,m}}function S(e){return function(e,t){return u(e)?[]:d(e)?s(e)?w(e):w(Object.keys(e).reduce((n,o)=>(u(e[o])||n.push(t(e[o],o)),n),[])):e}(e,(e,t)=>e?t:void 0)}function $(e,t,n,o){if(d(o)){if(c(o))return o(n,t,e);if(c(o[t]))return o[t](n,t,e)}d(n)&&function(e,t,n){s(n)?e.setAttribute("data-"+t,JSON.stringify(n)):c(n)||Object.keys(n).forEach(o=>{const r=f(n[o])?n[o]:JSON.stringify(n[o]);e.setAttribute(`${"data"!==t?"data-":""}${t}-${o}`,r)})}(e,t,n)}function M(e){return e.currentTarget.events[e.type](e)}function H(e,t,o,r){if(c(o))if(e.events=e.events||{},e.teardown||(e.teardown=()=>Object.keys(e.events).map(t=>e.removeEventListener(t,M))),"on"===t.substr(0,2)&&-1===n.indexOf(t)){const n=t.substr(2);e.events[n]||e.addEventListener(n,M,!1),e.events[n]=e=>function(e,t,n,o){let r;d(o)&&(c(o)?r=!1===o(t,e):c(o[t])&&(r=!1===o[t](e))),r||n(e)}(e,t,o,r)}else(n.indexOf(t)>-1?e:e.events)[t]=o}var I,D=((e,...t)=>{const n=w(t,c),o=(...e)=>n.reduce((t,n)=>n(...e)||t,void 0);return(...t)=>t.length<=2?e(t[0],t[1],o):o(...t)})(N,g(H,3,I),(e=>g($,3,e))({class:e=>S(e).join(" ")}));function W(e){var t,n,o,r=L(e.parentNode,["div",{class:"slider"}],D);function i(){t=e.parentNode.offsetWidth,n=e.parentNode.offsetHeight,e.style.width=t/2+"px",r.style.left=t/2-r.offsetWidth/2+"px",r.style.top=n/2-r.offsetHeight/2+"px"}function s(t){e.style.width=t+"px",r.style.left=e.offsetWidth-r.offsetWidth/2+"px"}function c(n){var r;if(!o)return!1;(r=function(t){var n=e.getBoundingClientRect(),o=(t||window.event).pageX-n.left;return o-=window.pageXOffset}(n))<0&&(r=0),r>t&&(r=t),s(r)}function u(e){e.preventDefault(),o=1,window.addEventListener("mousemove",c),window.addEventListener("touchmove",c)}function a(){o=0}return i(),r.addEventListener("mousedown",u),r.addEventListener("touchstart",u),window.addEventListener("mouseup",a),window.addEventListener("touchstop",a),{set width(e){s(e)},get width(){return parseInt(e.style.width,10)},update:function(){i()},teardown:function(){r.removeEventListener("mousedown",u),r.removeEventListener("touchstart",u),window.removeEventListener("mouseup",a),window.removeEventListener("touchstop",a),window.removeEventListener("mousemove",c),window.removeEventListener("touchmove",c),x(r)}}}function q(e,t,n){var o,r;function i(e){window.removeEventListener("keyup",e),document.body.style.overflow="",o&&o.teardown(),r.unmount()}function s(e){37===e.keyCode&&r.prev(e),39===e.keyCode&&r.next(e),32===e.keyCode&&(e.preventDefault(),r.change()),27===e.keyCode&&i(s)}function c(e){e&&e.target!==r.target||i(s)}function u(){return W(document.querySelector(".overlay"))}function a(){o&&o.update()}function d(e){if(e.width>screen.width||e.height>screen.height)return{width:e.width/2,height:e.height/2}}window.addEventListener("keyup",s);var f=P((function(e){var t,o=e.key,r=e.diff;return[".noop.modal",{onclick:c},[[".container",{style:(t=n[o],t.width>screen.width||t.height>screen.height?"width:100%;height:100%":"width:"+t.width+"px;height:"+t.height+"px"),onupdate:a},(r?[["img",Object.assign({src:n[o].images.out},d(n[o]))]]:[[".layer",[["img.a",Object.assign({src:n[o].images.actual},d(n[o]))]]],[".layer.overlay",[["img.b",Object.assign({src:n[o].images.base},d(n[o]))]]]]).concat([["button.close",{onclick:function(){return c()}},"×"]])]]]}),{diff:t,key:e},{next:function(e){return function(t){var r=t.key;if(t.diff||!e.shiftKey)return{key:Math.min(r+1,n.length-1)};o.width=Math.min(n[r].width,o.width+.25*n[r].width)}},prev:function(e){return function(t){var r=t.key;if(t.diff||!e.shiftKey)return{key:Math.max(r-1,0)};o.width=Math.max(0,o.width-.25*n[r].width)}},change:function(){return function(e){var t=e.diff;return o?(o.teardown(),o=null):t&&setTimeout((function(){o=u()})),{diff:!t}}}});r=f(document.body,D),document.body.style.overflow="hidden",t||(o=u())}var B=document.getElementById("app"),F=JSON.parse(B.innerHTML);B.parentNode.removeChild(B),L([function(){return F.length?["ul",F.map((function(e,t){return function(e,t){return["li",[["strong",e.label],[".flex",[["img.noop",{src:e.thumbnails.base}],["img.noop",{src:e.thumbnails.actual}],[".info",{class:e.ok?"passed":"failed"},[["h3",e.ok?"It passed.":"It did not passed"],["h2","Diff: "+e.diff+"%"],["button.noop",{onclick:function(){return q(t,!0,F)}},"Open diff"],["button.noop",{onclick:function(){return q(t,!1,F)}},"Compare"]]]]]]]}(e,t)}))]:["ul",[["li","No differences to report"]]]}],D)}));
//# sourceMappingURL=reporter.umd.js.map
